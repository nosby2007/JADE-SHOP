<!-- Actions -->
 <body>
  <div class="patient-actions">
  <button mat-raised-button color="primary" (click)="editPatient()">Modifier</button>
  <button mat-raised-button color="accent" (click)="printPatient()">Imprimer</button>
  <button mat-raised-button color="warn" [routerLink]="['/patientCli']">Retour</button>
</div>
<div class="patient-detail-container">
  <div *ngIf="patient$ | async as patient; else loading">
    <!-- Patient Details -->
    <div class="mat-elevation-z8">
      <h3>Détails du Patient</h3>
      <mat-table [dataSource]="[patient]"
        class=" table table-responsive-xl table-striped table-hover shadow table-bordered radius-5"
        style="border-radius: 10px;">
        <!-- Nom -->
        <ng-container matColumnDef="name">
          <mat-header-cell *matHeaderCellDef> Nom </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.name }} </mat-cell>
        </ng-container>

        <!-- Genre -->
        <ng-container matColumnDef="gender">
          <mat-header-cell *matHeaderCellDef> Genre </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.gender }} </mat-cell>
        </ng-container>

        <!-- Date de Naissance -->
        <ng-container matColumnDef="dob">
          <mat-header-cell *matHeaderCellDef> Date de Naissance </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.dob}} </mat-cell>
        </ng-container>

        <!-- Adresse -->
        <ng-container matColumnDef="address">
          <mat-header-cell *matHeaderCellDef> Adresse </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.address }} </mat-cell>
        </ng-container>

        <!-- Quartier -->
        <ng-container matColumnDef="quartier">
          <mat-header-cell *matHeaderCellDef> Quartier </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.quartier }} </mat-cell>
        </ng-container>

        <!-- Numéro de Téléphone -->
        <ng-container matColumnDef="phone">
          <mat-header-cell *matHeaderCellDef> Téléphone </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.phone }} </mat-cell>
        </ng-container>

        <!-- Email -->
        <ng-container matColumnDef="email">
          <mat-header-cell *matHeaderCellDef> Email </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.email }} </mat-cell>
        </ng-container>

        <!-- Docteur -->
        <ng-container matColumnDef="docteur">
          <mat-header-cell *matHeaderCellDef> Docteur </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.docteur }} </mat-cell>
        </ng-container>

        <!-- Département -->
        <ng-container matColumnDef="departement">
          <mat-header-cell *matHeaderCellDef> Département </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.departement }} </mat-cell>
        </ng-container>

        <!-- Raison -->
        <ng-container matColumnDef="raison">
          <mat-header-cell *matHeaderCellDef> Raison </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.raison }} </mat-cell>
        </ng-container>

        <!-- Mode de Paiement -->
        <ng-container matColumnDef="paiement">
          <mat-header-cell *matHeaderCellDef> Paiement </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.paiement }} </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumnsa"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumnsa;"></mat-row>
      </mat-table>

    </div>
    <!-- Emergency Contact -->
    <div class="mat-elevation-z8 emergency-contact">
      <mat-table [dataSource]="[patient]" class="table-responsive-xl shadow" style="border-radius: 10px;">
        <h3>Contact d'Urgence</h3>
        <!-- Nom -->
        <ng-container matColumnDef="Ename">
          <mat-header-cell *matHeaderCellDef> Nom </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.Ename }} </mat-cell>
        </ng-container>

        <!-- Relation -->
        <ng-container matColumnDef="relationship">
          <mat-header-cell *matHeaderCellDef> Relation </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.relationship }} </mat-cell>
        </ng-container>

        <!-- Téléphone -->
        <ng-container matColumnDef="Ephone">
          <mat-header-cell *matHeaderCellDef> Téléphone </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.Ephone }} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="allergie">
          <mat-header-cell *matHeaderCellDef color="warn"> Allergies </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.allergie }} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="admission">
          <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.admission}}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="hospital">
          <mat-header-cell *matHeaderCellDef> Hopital de reférence </mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.hospital }} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="code">
          <mat-header-cell *matHeaderCellDef> Code statut</mat-header-cell>
          <mat-cell *matCellDef="let patient"> {{ patient.code}} </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="emergencyColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: emergencyColumns;"></mat-row>
      </mat-table>
    </div>
  </div>
</div>


<ng-template #loading>
  <p>Chargement des détails du patient...</p>
</ng-template>


<ng-template #loading>
  <p>Chargement des détails du patient...</p>
</ng-template>

<div class="patient-detail-container">
  <mat-tab-group>
    <!-- Tab: Dash -->
    <mat-tab label="Dashboard">
      <div class="dashboard-container">
        <!-- Section Prescriptions -->
        <div class="table-section">
          <h2>Prescriptions</h2>
          <div class="table-scrollable">
            <div *ngIf="prescriptions.length > 0; else noData">
              <table mat-table [dataSource]="prescriptions| slice:-10" class="mat-elevation-z8" matSort
                class="table-responsive bg-warning stripped">
                <ng-container matColumnDef="description">
                  <mat-header-cell *matHeaderCellDef mat-sort-header>Prescription</mat-header-cell>
                  <mat-cell *matCellDef="let prescription">{{ prescription.description }}</mat-cell>
                </ng-container>

                <ng-container matColumnDef="category">
                  <mat-header-cell *matHeaderCellDef mat-sort-header>Catégorie</mat-header-cell>
                  <mat-cell *matCellDef="let prescription">{{ prescription.category }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="instructions">
                  <mat-header-cell *matHeaderCellDef mat-sort-header>instructions</mat-header-cell>
                  <mat-cell *matCellDef="let prescription"><span matTooltip="{{ prescription.instructions}}"
                      matTooltipPosition="above" matTooltipClass="custom-tooltip"> {{ prescription.instructions ?
                      (prescription.instructions | slice:0:20) + (prescription.instructions.length > 20 ? '...' : '') :
                      '' }}</span>
                  </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumnsPrescriptions"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumnsPrescriptions;"></mat-row>
              </table>
            </div>
          </div>

        </div>

        <div class="dashbord-container">
          <!-- Section Allergies -->
          <div class="table-section">
            <h2>Allergies</h2>
            <div class="table-scrollable">
              <div *ngIf="allergies.length > 0; else noData">
                <mat-table [dataSource]="allergies| slice:-10" class="mat-elevation-z8" matSort
                  class="table-responsive bg-success stripped">
                  <ng-container matColumnDef="category">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Catégorie</mat-header-cell>
                    <mat-cell *matCellDef="let allergy">{{ allergy.category }}</mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="allergen">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Allergène</mat-header-cell>
                    <mat-cell *matCellDef="let allergy">{{ allergy.allergen }}</mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="manifestation">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>manifestation</mat-header-cell>
                    <mat-cell *matCellDef="let allergy"><span matTooltip="{{ allergy.manifestation}}"
                        matTooltipPosition="above" matTooltipClass="custom-tooltip"> {{ allergy.manifestation ?
                        (allergy.manifestation | slice:0:20) + (allergy.manifestation.length > 20 ? '...' : '') : ''
                        }}</span>
                    </mat-cell>
                  </ng-container>

                  <mat-header-row *matHeaderRowDef="displayedColumnsAllergies"></mat-header-row>
                  <mat-row *matRowDef="let row; columns: displayedColumnsAllergies;"></mat-row>
                </mat-table>
              </div>
            </div>
          </div>
        </div>

      </div>

      <!-- Progress Notes Section -->
      <div class="dashboard-flex-container">
        <div class="dashboard-flex-item">
          <h2>Notes de Progrès</h2>
          <div *ngIf="progressNotes.length > 0; else noData">
            <mat-table [dataSource]="progressNotes| slice:-4" class="mat-elevation-z8" matSort
              class="table-responsive bg-secondary stripped">
              <ng-container matColumnDef="noteText">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Note</mat-header-cell>
                <mat-cell *matCellDef="let progressNotes"><span matTooltip="{{ progressNotes.noteText}}"
                    matTooltipPosition="above" matTooltipClass="custom-tooltip"> {{ progressNotes.noteText ?
                    (progressNotes.noteText | slice:0:20) + (progressNotes.noteText.length > 20 ? '...' : '') : ''
                    }}</span>
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Types</mat-header-cell>
                <mat-cell *matCellDef="let progressNotes">{{ progressNotes.type }}</mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Cree Par</mat-header-cell>
                <mat-cell *matCellDef="let progressNotes">{{ progressNotes.username }}</mat-cell>
              </ng-container>

              <mat-header-row *matHeaderRowDef="displayedColumnsProgressNotes"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsProgressNotes;"></mat-row>
            </mat-table>
          </div>
        </div>

        <div class="dashboard-flex-item">
          <h2>Diagnostic</h2>
          <div *ngIf="diagnostic.length > 0; else noData">
            <mat-table [dataSource]="diagnostic| slice:-4" class="mat-elevation-z8" matSort>
              <ng-container matColumnDef="description">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Note</mat-header-cell>
                <mat-cell *matCellDef="let diagnostic"><span matTooltip="{{ diagnostic.description}}"
                    matTooltipPosition="above" matTooltipClass="custom-tooltip"> {{ diagnostic.description ?
                    (diagnostic.description | slice:0:20) + (diagnostic.description.length > 20 ? '...' : '') : ''
                    }}</span>
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="classification">
                <mat-header-cell *matHeaderCellDef mat-sort-header>classification</mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">{{ diagnostic.classification}}</mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Cree Par</mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">{{ diagnostic.username }}</mat-cell>
              </ng-container>
              <ng-container matColumnDef="commentaire">
                <mat-header-cell *matHeaderCellDef mat-sort-header>commentaire</mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">{{ diagnostic.commentaire }}</mat-cell>
              </ng-container>
              <ng-container matColumnDef="code">
                <mat-header-cell *matHeaderCellDef mat-sort-header>code</mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">{{ diagnostic.code }}</mat-cell>
              </ng-container>

              <mat-header-row *matHeaderRowDef="displayedColumnsdiagnostic"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsdiagnostic;"></mat-row>
            </mat-table>
          </div>
        </div>
      </div>
    </mat-tab>


    <!-- Tab: Profile -->
    <mat-tab label="Profile">
      <div class="tab-content">
        <h3>Profil du Patient</h3>
        <div class="profile-container">
          <!-- Section Contacts -->
          <div class="section">
            <h2>Contacts</h2>
            <button mat-raised-button color="primary" (click)="openContactModal()">Ajouter</button>
            <mat-table [dataSource]="contacts" class="mat-elevation-z8" matSort>
              <ng-container matColumnDef="name">
                <mat-header-cell *matHeaderCellDef> Nom </mat-header-cell>
                <mat-cell *matCellDef="let contact"> {{ contact.name }} </mat-cell>
              </ng-container>
              <ng-container matColumnDef="phoneEmail">
                <mat-header-cell *matHeaderCellDef> Téléphone/Email </mat-header-cell>
                <mat-cell *matCellDef="let contact"> {{ contact.phoneEmail }} </mat-cell>
              </ng-container>
              <ng-container matColumnDef="relation">
                <mat-header-cell *matHeaderCellDef> Relation </mat-header-cell>
                <mat-cell *matCellDef="let contact"> {{ contact.relation }} </mat-cell>
              </ng-container>
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type de contact </mat-header-cell>
                <mat-cell *matCellDef="let contact"> {{ contact.type }} </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumnsContacts"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsContacts;"></mat-row>
            </mat-table>
          </div>

          <!-- Section Médecins -->
          <div class="section">
            <h2>Médecins</h2>
            <button mat-raised-button color="primary" (click)="openDoctorModal()">Ajouter</button>
            <mat-table [dataSource]="doctors" class="mat-elevation-z8" matSort>
              <ng-container matColumnDef="name">
                <mat-header-cell *matHeaderCellDef> Nom </mat-header-cell>
                <mat-cell *matCellDef="let doctor"> {{ doctor.name }} </mat-cell>
              </ng-container>
              <ng-container matColumnDef="profession">
                <mat-header-cell *matHeaderCellDef> Profession </mat-header-cell>
                <mat-cell *matCellDef="let doctor"> {{ doctor.profession }} </mat-cell>
              </ng-container>
              <ng-container matColumnDef="phone">
                <mat-header-cell *matHeaderCellDef> Téléphone </mat-header-cell>
                <mat-cell *matCellDef="let doctor"> {{ doctor.phone }} </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumnsDoctors"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsDoctors;"></mat-row>
            </mat-table>
          </div>

          <!-- Ajoutez d'autres sections ici -->
        </div>
      </div>
    </mat-tab>

    <!-- Tab: Census -->
    <mat-tab label="Census">
      <div class="tab-content">
        <h3>Census</h3>
        <div class="census-container">
          <h2>Census</h2>
          <button class="btn btn-primary" (click)="generatePDFAndSaveToFirebase()">Print Census</button>
          <mat-table [dataSource]="censusData" class="mat-elevation-z8" matSort>
            <ng-container matColumnDef="effectiveDate">
              <mat-header-cell *matHeaderCellDef>Effective Date</mat-header-cell>
              <mat-cell *matCellDef="let element">{{ element.effectiveDate }}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="primaryPayer">
              <mat-header-cell *matHeaderCellDef>Primary Payer</mat-header-cell>
              <mat-cell *matCellDef="let element">{{ element.primaryPayer }}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="status">
              <mat-header-cell *matHeaderCellDef>Status</mat-header-cell>
              <mat-cell *matCellDef="let element">{{ element.status }}</mat-cell>
            </ng-container>
            <!-- Ajoutez les autres colonnes ici -->
            <mat-header-row *matHeaderRowDef="censusDisplayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: censusDisplayedColumns;"></mat-row>
          </mat-table>
        </div>
        <div class="loc-container">
          <h2>Level of Care (LOC)</h2>
          <button mat-raised-button color="primary" align="end">Print LOC</button>
          <mat-table [dataSource]="locData" class="mat-elevation-z8" matSort>
            <ng-container matColumnDef="effectiveFromDate">
              <mat-header-cell *matHeaderCellDef>Effective From Date</mat-header-cell>
              <mat-cell *matCellDef="let element">{{ element.effectiveFromDate }}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="effectiveThruDate">
              <mat-header-cell *matHeaderCellDef>Effective Thru Date</mat-header-cell>
              <mat-cell *matCellDef="let element">{{ element.effectiveThruDate }}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="skilled">
              <mat-header-cell *matHeaderCellDef>Skilled?</mat-header-cell>
              <mat-cell *matCellDef="let element">{{ element.skilled }}</mat-cell>
            </ng-container>
            <!-- Ajoutez les autres colonnes ici -->
            <mat-header-row *matHeaderRowDef="locDisplayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: locDisplayedColumns;"></mat-row>
          </mat-table>
        </div>

      </div>
    </mat-tab>

    <!-- Tab: diagnostique -->
    <mat-tab label="Diagnostique Medical">
      <div class="tab-content">
        <div>

          <mat-menu #MedDiagnosticMenu="matMenu">
            <button mat-menu-item (click)="openDiagnosticModal('MedDiagnostic')">MedDiagnostic</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="MedDiagnosticMenu">
            Nouveau Diagnostique
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/alldiag'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="diagnostic.length > 0; else noData">

            <mat-table [dataSource]="diagnostic" class="mat-elevation-z8">
              <ng-container matColumnDef="date">
                <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">
                  {{ diagnostic.date}}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="code">
                <mat-header-cell *matHeaderCellDef> Code </mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">
                  {{ diagnostic.code }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="rang">
                <mat-header-cell *matHeaderCellDef> Rang </mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">
                  {{ diagnostic.rang }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="description">
                <mat-header-cell *matHeaderCellDef> Description</mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">
                  {{ diagnostic.description }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="classification">
                <mat-header-cell *matHeaderCellDef> Classification</mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">
                  {{ diagnostic.classification }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="commentaire">
                <mat-header-cell *matHeaderCellDef> Commentaire</mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">
                  {{ diagnostic.commentaire }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef> Créée par:</mat-header-cell>
                <mat-cell *matCellDef="let diagnostic">
                  {{ diagnostic.username }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns1"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns1;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- Tab: Allergy -->
    <mat-tab label="Allergy">
      <div class="tab-content">
        <div>

          <mat-menu #AllergyMenu="matMenu">
            <button mat-menu-item (click)="openAllergyNoteModal('Allergy')">Allergy</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="AllergyMenu">
            Allergies
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/alldiag'">
            Voir Toutes les Allergies
          </button>

          <div *ngIf="allergies.length > 0; else noData">

            <mat-table [dataSource]="allergies" class="mat-elevation-z8">
              <ng-container matColumnDef="date">
                <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
                <mat-cell *matCellDef="let allergies">
                  {{ allergies.date }}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="category">
                <mat-header-cell *matHeaderCellDef> Categorie </mat-header-cell>
                <mat-cell *matCellDef="let allergies">
                  {{ allergies.category }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="note">
                <mat-header-cell *matHeaderCellDef> Note </mat-header-cell>
                <mat-cell *matCellDef="let allergies">
                  {{ allergies.note }}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="status">
                <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
                <mat-cell *matCellDef="let allergies">
                  {{ allergies.status }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="manifestation">
                <mat-header-cell *matHeaderCellDef> Manifestation </mat-header-cell>
                <mat-cell *matCellDef="let allergies">
                  {{ allergies.manifestation }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="allergen">
                <mat-header-cell *matHeaderCellDef> Allergen</mat-header-cell>
                <mat-cell *matCellDef="let allergies">
                  {{ allergies.allergen }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="classification">
                <mat-header-cell *matHeaderCellDef> Classification</mat-header-cell>
                <mat-cell *matCellDef="let allergies">
                  {{ allergies.classification }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="severity">
                <mat-header-cell *matHeaderCellDef> Severite</mat-header-cell>
                <mat-cell *matCellDef="let allergies">
                  {{ allergies.severity}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="allergyType">
                <mat-header-cell *matHeaderCellDef> Type</mat-header-cell>
                <mat-cell *matCellDef="let allergies">
                  {{ allergies.allergyType}}
                </mat-cell>
              </ng-container>
              <!-- Colonne Actions -->
              <ng-container matColumnDef="actions">
                <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                <mat-cell *matCellDef="let allergy">
                  <i class="material-icons" style="color: yellow; font-weight: bold;"
                    (click)="viewAllergy(allergy)">remove_red_eye</i>
                  <button mat-button><i class="material-icons" style="color: blue; cursor: pointer;"
                      (click)="updateAllergy(allergy)">edit</i></button>
                  <i class="material-icons" style="color: red; cursor: pointer;"
                    (click)="strikeoutAllergy(allergy)">delete</i>
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumnsallergy"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsallergy;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune allergies disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- immunisation-->
    <mat-tab label="immunisation">
      <div class="tab-content">
        <div>

          <mat-menu #VaccinationMenu="matMenu">
            <button mat-menu-item (click)="openVaccinationModal('Vaccination')">Vaccination</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="VaccinationMenu">
            Nouveau vaccin
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/alldiag'">
            Voir Toutes les vaccins
          </button>

          <div *ngIf="vaccination.length > 0; else noData">

            <mat-table [dataSource]="vaccination" class="mat-elevation-z8">

              <ng-container matColumnDef="actions">
                <mat-header-cell *matHeaderCellDef> Actions</mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.actions }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="administrationDate">
                <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.administrationDate}}
                </mat-cell>
              </ng-container>


              <ng-container matColumnDef="time">
                <mat-header-cell *matHeaderCellDef> time </mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.time}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="routeOfAdministration">
                <mat-header-cell *matHeaderCellDef> route d'Administration </mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.routeOfAdministration}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="dose">
                <mat-header-cell *matHeaderCellDef> dose</mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.dose }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="locationGiven">
                <mat-header-cell *matHeaderCellDef> locationGiven</mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.locationGiven }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="substanceExpirationDate">
                <mat-header-cell *matHeaderCellDef> Expiration Date</mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.substanceExpirationDate }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="administeredBy">
                <mat-header-cell *matHeaderCellDef> Créée par:</mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.administeredBy }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="manufacturerName">
                <mat-header-cell *matHeaderCellDef> Fabriquant:</mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.manufacturerName }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="vaccineType">
                <mat-header-cell *matHeaderCellDef> type vaccin:</mat-header-cell>
                <mat-cell *matCellDef="let vaccination">
                  {{ vaccination.vaccineType }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumnsVaccinations"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsVaccinations;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- Tab: Orders -->

    <mat-tab label="Prescriptions">
      <div class="tab-content">
        <div>
          <mat-menu #prescriptionMenu="matMenu">
            <button mat-menu-item (click)="openPrescriptionModal('Pharmacy')">Pharmacy</button>
            <button mat-menu-item (click)="openPrescriptionModal('Other')">Other</button>
            <button mat-menu-item (click)="openPrescriptionModal('Laboratory')">Laboratoire</button>
            <button mat-menu-item (click)="openPrescriptionModal('Nutrition')">Nutrition</button>
            <button mat-menu-item (click)="openPrescriptionModal('Supplement')">Supplement</button>
          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="prescriptionMenu">
            New Prescription
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/order'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="prescriptions else noData">
            <mat-table [dataSource]="prescriptions" class="mat-elevation-z8 table-success table-striped shadow">
              <!-- Colonne Date -->
              <ng-container matColumnDef="date">
                <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
                <mat-cell *matCellDef="let prescription"> {{ prescription.date}}
                </mat-cell>
              </ng-container>

              <!-- Colonne Type -->
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell *matCellDef="let prescription"> {{ prescription.type }} </mat-cell>
              </ng-container>


              <!-- Colonne Prescriber -->
              <ng-container matColumnDef="prescriber">
                <mat-header-cell *matHeaderCellDef> Prescrit par </mat-header-cell>
                <mat-cell *matCellDef="let prescription"> {{ prescription.prescriber }} </mat-cell>
              </ng-container>
              <ng-container matColumnDef="description">
                <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell *matCellDef="let prescription"> {{ prescription.description }} </mat-cell>
              </ng-container>
              <ng-container matColumnDef="category">
                <mat-header-cell *matHeaderCellDef> Categorie </mat-header-cell>
                <mat-cell *matCellDef="let prescription"> {{ prescription.category }} </mat-cell>
              </ng-container>

              <!-- En-tête et Lignes -->
              <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
            </mat-table>
          </div>


          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- resultats-->
    <mat-tab label="resultats">
      <div class="tab-content">

        <div>

          <mat-menu #progressNoteMenu="matMenu">
            <button mat-menu-item (click)="openProgressNoteModal('ProgressNote')">ProgressNote</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="progressNoteMenu">
            New Prescription
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/allprog'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="progressNotes.length > 0; else noData">

            <mat-table [dataSource]="progressNotes" class="mat-elevation-z8">
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.type}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="time">
                <mat-header-cell *matHeaderCellDef> Temps</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.time}}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="noteText">
                <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.noteText }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="effectiveDate">
                <mat-header-cell *matHeaderCellDef> Date création</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.effectiveDate}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef> Créé Par: </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.username }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns2"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns2;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- Plan de soin -->
    <mat-tab label="MDS">
      <div class="tab-content">

        <div>

          <mat-menu #progressNoteMenu="matMenu">
            <button mat-menu-item (click)="openProgressNoteModal('ProgressNote')">ProgressNote</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="progressNoteMenu">
            New Prescription
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/allprog'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="progressNotes.length > 0; else noData">

            <mat-table [dataSource]="progressNotes" class="mat-elevation-z8">
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.type}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="time">
                <mat-header-cell *matHeaderCellDef> Temps</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.time}}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="noteText">
                <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.noteText }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="effectiveDate">
                <mat-header-cell *matHeaderCellDef> Date création</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.effectiveDate}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef> Créé Par: </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.username }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns2"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns2;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- signe Vitaux-->
    <mat-tab label="Signe Vitaux">
      <div class="tab-content">

        <div>

          <mat-menu #vitalMenu="matMenu">
            <button mat-menu-item (click)="openVitalsModal('Vitals')">Signe Vitaux</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="vitalMenu">
            Nouveau signe vitaux
          </button>
          <br> <br>

          <div *ngIf="vital.length > 0; else noData">


            <div class="container mt-20 pt-7">
              <div class="row bg-primary d-flex justify-content-between">
                <h1 style="color: white;"><mat-icon>assignment</mat-icon>Observation Patient</h1>
              </div>
              <table
                class="table shadow table-xl-responsive table-hover table-striped table-bordered table-primary radius-5 ">
                <thead class="table-primary">
                  <tr>
                    <th>Taille</th>
                    <th>Poids</th>
                    <th>IMC</th>
                    <th>Systole</th>
                    <th>Diastole</th>
                    <th>Poul</th>
                    <th>SPO2</th>
                    <th>Respiration</th>
                    <th>Glycémie</th>
                    <th>Allergies</th>
                    <th>Douleur</th>
                    <th>Reaction Allergique</th>
                    <th>Plaintes du Patient:</th>
                    <th>Observation Infirmère:</th>
                    <th>Histoire Medical:</th>
                    <th>Histoire Chirurgicale:</th>
                    <th>Medicaments:</th>
                    <th>Date:</th>
                  </tr>
                </thead>

                <tbody class="table-fluid table-bordered table-secondary align-items-center shadow"
                  *ngFor="let nurseDetails of vital">
                  <tr>
                    <td>{{nurseDetails.taille}}</td>
                    <td>{{nurseDetails.poids}}</td>
                    <td>{{nurseDetails.imc}}</td>
                    <td>{{nurseDetails.systole}}</td>
                    <td>{{nurseDetails.dyastole}}</td>
                    <td>{{nurseDetails.poul}}</td>
                    <td>{{nurseDetails.saturation}}</td>
                    <td>{{nurseDetails.respiration}}</td>
                    <td>{{nurseDetails.glycemie}}</td>
                    <td>{{nurseDetails.allergie}}</td>
                    <td>{{nurseDetails.douleur}}</td>
                    <td>{{nurseDetails.reaction}}</td>
                    <td>{{nurseDetails.note}}</td>
                    <td>{{nurseDetails.observations}}</td>
                    <td>{{nurseDetails.histoire}}</td>
                    <td>{{nurseDetails.chirurgie}}</td>
                    <td>{{nurseDetails.medicament}}</td>
                    <td>{{nurseDetails.date}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- Assessment-->
    <mat-tab label="Assessment">
      <div class="tab-content">
        <div>
          <mat-menu #assessmentMenu="matMenu">
            <button mat-menu-item (click)="openAssessmentModal('Braden')"
              style="width: 250px; color: black; font-size: 20px;">Echelle de Braden</button>
            <button mat-menu-item (click)="openAssessmentModal('Peau')"
              style="width: 250px; color: black; font-size: 20px;">Evaluation de lA PEAU</button>
            <button mat-menu-item (click)="openAssessmentModal('Chutte')"
              style="width: 250px; color: black; font-size: 20px;">Risque de chutte</button>
            <button mat-menu-item (click)="openAssessmentModal('Antibiotique' )"
              style="width: 250px; color: black; font-size: 20px;">Controle Antibiotique</button>
          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="assessmentMenu">
            Nouvel Evaluation
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/order'">
            Voir Toutes les assessments
          </button>
          <br> <br>

          <div *ngIf="antibiotics else noData">
            <h3>Evaluation Antibiotic</h3>
            <mat-table [dataSource]="antibiotics" class="mat-elevation-z8 table-success table-striped shadow">
              <!-- Colonne Date -->
              <ng-container matColumnDef="prescripteur">
                <mat-header-cell *matHeaderCellDef> prescripteur</mat-header-cell>
                <mat-cell *matCellDef="let antibiotic"> {{ antibiotic.prescripteur}}
                </mat-cell>
              </ng-container>

              <!-- Colonne Type -->
              <ng-container matColumnDef="medicament">
                <mat-header-cell *matHeaderCellDef> medicament</mat-header-cell>
                <mat-cell *matCellDef="let antibiotic"> {{antibiotic.medicament }} </mat-cell>
              </ng-container>
             


              <!-- Colonne Prescriber -->
              <ng-container matColumnDef="date">
                <mat-header-cell *matHeaderCellDef>Date </mat-header-cell>
                <mat-cell *matCellDef="let antibiotic"> {{ antibiotic.date}} </mat-cell>
              </ng-container>
              <!-- Colonne Prescriber -->
              <ng-container matColumnDef="notes">
                <mat-header-cell *matHeaderCellDef>Notes</mat-header-cell>
                <mat-cell *matCellDef="let antibiotic"> {{ antibiotic.notes}} </mat-cell>
              </ng-container>
              <!-- Colonne Prescriber -->
              <ng-container matColumnDef="indication">
                <mat-header-cell *matHeaderCellDef>Indication</mat-header-cell>
                <mat-cell *matCellDef="let antibiotic"> {{ antibiotic.indication}} </mat-cell>
              </ng-container>
              <!-- Actions -->
              <ng-container matColumnDef="actions">
                <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                <mat-cell *matCellDef="let antibiotic">
                  <i class="material-icons" style="color: yellow; font-weight: bold;"
                    (click)="viewAntibiotic(antibiotic)">remove_red_eye</i>
                  <i class="material-icons" style="color: blue; cursor: pointer;"
                      (click)="updateAntibiotic(antibiotic)">edit</i>
                  <i class="material-icons" style="color: red; cursor: pointer;"
                    (click)="strikeoutAntibiotic(antibiotic)">delete</i>
                </mat-cell>
              </ng-container>

              <!-- En-tête et Lignes -->
              <mat-header-row *matHeaderRowDef="displayedColumnsantibio"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsantibio;"></mat-row>
            </mat-table>
          </div>


          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>

      <div class="tab-content">
        <div *ngIf="assessments else noData">
          <br>
          <h3>Evaluation Evaluation de Braden</h3>
          <mat-table [dataSource]="assessments" class="mat-elevation-z8 table-success table-striped shadow">
            <!-- Colonne Date -->
            <ng-container matColumnDef="sensory">
              <mat-header-cell *matHeaderCellDef> Sensibilite</mat-header-cell>
              <mat-cell *matCellDef="let assessment"> {{ assessment.sensory}}
              </mat-cell>
            </ng-container>

            <!-- Colonne Type -->
            <ng-container matColumnDef="activity">
              <mat-header-cell *matHeaderCellDef> activite </mat-header-cell>
              <mat-cell *matCellDef="let assessment"> {{assessment.activity }} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="moisture">
              <mat-header-cell *matHeaderCellDef> Humidite </mat-header-cell>
              <mat-cell *matCellDef="let assessment"> {{assessment.moisture }} </mat-cell>
            </ng-container>


            <!-- Colonne Prescriber -->
            <ng-container matColumnDef="date">
              <mat-header-cell *matHeaderCellDef>Date </mat-header-cell>
              <mat-cell *matCellDef="let assessment"> {{ assessment.date}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="mobility">
              <mat-header-cell *matHeaderCellDef>mobilite </mat-header-cell>
              <mat-cell *matCellDef="let assessment"> {{ assessment.mobility }} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="nutrition">
              <mat-header-cell *matHeaderCellDef> nutrition</mat-header-cell>
              <mat-cell *matCellDef="let assessment"> {{ assessment.nutrition }} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="friction">
              <mat-header-cell *matHeaderCellDef> friction </mat-header-cell>
              <mat-cell *matCellDef="let assessment"> {{ assessment.friction }} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="totalScore">
              <mat-header-cell *matHeaderCellDef> totalScore </mat-header-cell>
              <mat-cell *matCellDef="let assessment">
                {{ assessment.totalScore }}:
                <span *ngIf="assessment.totalScore >= 15 && assessment.totalScore <= 18"
                  style="color: rgb(0, 255, 38);font-weight: 900;">A risque</span>
                <span *ngIf="assessment.totalScore >= 13 && assessment.totalScore <= 14"
                  style="color: yellow;font-weight: 900;">Risque MODEREE </span>
                <span *ngIf="assessment.totalScore >= 10 && assessment.totalScore <= 12"
                  style="color: rgb(255, 166, 0);font-weight: 900;">Haut Risque</span>
                <span *ngIf="assessment.totalScore <= 9" style="color: red;font-weight: 900;">Tres Haut Risque</span>
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="actions">
              <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
              <mat-cell *matCellDef="let aassessment">
                <i class="material-icons" style="color: yellow; font-weight: bold;"
                  (click)="viewAssessment(aassessment)">remove_red_eye</i>
                <button mat-button><i class="material-icons" style="color: blue; cursor: pointer;"
                    (click)="updateAssessment(aassessment)">edit</i></button>
                <i class="material-icons" style="color: red; cursor: pointer;"
                  (click)="strikeoutAssessment(aassessment)">delete</i>
              </mat-cell>
            </ng-container>

            <!-- En-tête et Lignes -->
            <mat-header-row *matHeaderRowDef="displayedColumnsAssessment"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumnsAssessment;"></mat-row>
          </mat-table>
        </div>


        <ng-template #noData>
          <p>Aucune prescription disponible pour le moment.</p>
        </ng-template>
      </div>

    </mat-tab>

    <!-- peaux et plaie -->
    <mat-tab label="peau et Plaie">
      <div class="tab-content">

        <div>

          <mat-menu #progressNoteMenu="matMenu">
            <button mat-menu-item (click)="openProgressNoteModal('ProgressNote')">ProgressNote</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="progressNoteMenu">
            New Prescription
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/allprog'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="progressNotes.length > 0; else noData">

            <mat-table [dataSource]="progressNotes" class="mat-elevation-z8">
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.type}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="time">
                <mat-header-cell *matHeaderCellDef> Temps</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.time}}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="noteText">
                <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.noteText }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="effectiveDate">
                <mat-header-cell *matHeaderCellDef> Date création</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.effectiveDate *1000| date: 'medium'}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef> Créé Par: </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.username }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns2"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns2;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- Therapy-->
    <mat-tab label="Therapy">
      <div class="tab-content">

        <div>

          <mat-menu #progressNoteMenu="matMenu">
            <button mat-menu-item (click)="openProgressNoteModal('ProgressNote')">ProgressNote</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="progressNoteMenu">
            New Prescription
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/allprog'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="progressNotes.length > 0; else noData">

            <mat-table [dataSource]="progressNotes" class="mat-elevation-z8">
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.type}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="time">
                <mat-header-cell *matHeaderCellDef> Temps</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.time}}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="noteText">
                <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.noteText }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="effectiveDate">
                <mat-header-cell *matHeaderCellDef> Date création</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.effectiveDate *1000| date: 'medium'}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef> Créé Par: </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.username }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns2"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns2;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- Note de Progression -->
    <mat-tab label="Notes de Progression">
      <div class="tab-content">

        <div>

          <mat-menu #progressNoteMenu="matMenu">
            <button mat-menu-item (click)="openProgressNoteModal('ProgressNote')">ProgressNote</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="progressNoteMenu">
            New Prescription
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/allprog'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="progressNotes.length > 0; else noData">

            <mat-table [dataSource]="progressNotes" class="mat-elevation-z8">
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.type}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="time">
                <mat-header-cell *matHeaderCellDef> Temps</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.time}}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="noteText">
                <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.noteText }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="effectiveDate">
                <mat-header-cell *matHeaderCellDef> Date création</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.effectiveDate *1000| date: 'medium'}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef> Créé Par: </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.username }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns2"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns2;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- taches-->
    <mat-tab label="taches">
      <div class="tab-content">

        <div>

          <mat-menu #progressNoteMenu="matMenu">
            <button mat-menu-item (click)="openProgressNoteModal('ProgressNote')">ProgressNote</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="progressNoteMenu">
            New Prescription
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/allprog'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="progressNotes.length > 0; else noData">

            <mat-table [dataSource]="progressNotes" class="mat-elevation-z8">
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.type}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="time">
                <mat-header-cell *matHeaderCellDef> Temps</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.time}}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="noteText">
                <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.noteText }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="effectiveDate">
                <mat-header-cell *matHeaderCellDef> Date création</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.effectiveDate}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef> Créé Par: </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.username }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns2"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns2;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>

    <!-- MISC-->
    <mat-tab label="MRECORD">
      <div class="tab-content">

        <div>

          <mat-menu #progressNoteMenu="matMenu">
            <button mat-menu-item (click)="openProgressNoteModal('ProgressNote')">ProgressNote</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="progressNoteMenu">
            New Prescription
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/allprog'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="progressNotes.length > 0; else noData">

            <mat-table [dataSource]="progressNotes" class="mat-elevation-z8">
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.type}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="time">
                <mat-header-cell *matHeaderCellDef> Temps</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.time}}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="noteText">
                <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.noteText }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="effectiveDate">
                <mat-header-cell *matHeaderCellDef> Date création</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.effectiveDate}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef> Créé Par: </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.username }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns2"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns2;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>
    <!-- inbound -->
    <mat-tab label="inbound">
      <div class="tab-content">

        <div>

          <mat-menu #progressNoteMenu="matMenu">
            <button mat-menu-item (click)="openProgressNoteModal('ProgressNote')">ProgressNote</button>

          </mat-menu>

          <button mat-raised-button color="primary" [matMenuTriggerFor]="progressNoteMenu">
            New Prescription
          </button>

          <button mat-raised-button color="primary" style="margin-left: 20px; background-color: #ff8c00;"
            [routerLink]="'/allprog'">
            Voir Toutes les Prescriptions
          </button>

          <div *ngIf="progressNotes.length > 0; else noData">

            <mat-table [dataSource]="progressNotes" class="mat-elevation-z8">
              <ng-container matColumnDef="type">
                <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.type}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="time">
                <mat-header-cell *matHeaderCellDef> Temps</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{progressNote.time}}
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="noteText">
                <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.noteText }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="effectiveDate">
                <mat-header-cell *matHeaderCellDef> Date création</mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.effectiveDate }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="username">
                <mat-header-cell *matHeaderCellDef> Créé Par: </mat-header-cell>
                <mat-cell *matCellDef="let progressNote">
                  {{ progressNote.username }}
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns2"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns2;"></mat-row>
            </mat-table>
          </div>
          <ng-template #noData>
            <p>Aucune prescription disponible pour le moment.</p>
          </ng-template>
        </div>
      </div>
    </mat-tab>



  </mat-tab-group>
</div>
 </body>
