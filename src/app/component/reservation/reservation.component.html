<mat-vertical-stepper linear #stepper>
    <!-- Étape 1 : Informations personnelles -->
    <mat-step [stepControl]="personalInfoForm">
      <form [formGroup]="personalInfoForm">
        <ng-template matStepLabel>Informations personnelles</ng-template>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nom complet</mat-label>
          <input matInput formControlName="userName" required />
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>E-mail</mat-label>
          <input matInput formControlName="userEmail" type="email" required />
        </mat-form-field>
  
        <div class="actions">
          <button mat-raised-button matStepperNext [disabled]="personalInfoForm.invalid">Suivant</button>
        </div>
      </form>
    </mat-step>
  
    <!-- Étape 2 : Détails de contact et adresse -->
    <mat-step [stepControl]="contactForm">
      <form [formGroup]="contactForm">
        <ng-template matStepLabel>Détails de contact et adresse</ng-template>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Numéro de téléphone</mat-label>
          <input matInput formControlName="phoneNumber" type="tel" required />
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Adresse</mat-label>
          <textarea matInput formControlName="address" placeholder="Entrez votre adresse" required></textarea>
        </mat-form-field>
  
        <div class="actions">
          <button mat-raised-button matStepperPrevious>Retour</button>
          <button mat-raised-button matStepperNext [disabled]="contactForm.invalid">Suivant</button>
        </div>
      </form>
    </mat-step>
  
    <!-- Étape 3 : Choix du service -->
    <mat-step [stepControl]="serviceForm">
      <form [formGroup]="serviceForm">
        <ng-template matStepLabel>Choix du service</ng-template>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Sélectionnez un service</mat-label>
          <mat-select formControlName="serviceName" required>
            <mat-option *ngFor="let service of services" [value]="service.name">
              {{ service.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Date et heure</mat-label>
          <input matInput formControlName="reservationDate" type="datetime-local" required />
        </mat-form-field>
  
        <div class="actions">
          <button mat-raised-button matStepperPrevious>Retour</button>
          <button mat-raised-button matStepperNext [disabled]="serviceForm.invalid">Suivant</button>
        </div>
      </form>
    </mat-step>
  
    <!-- Étape 4 : Création de compte -->
    <mat-step [stepControl]="accountForm">
      <form [formGroup]="accountForm">
        <ng-template matStepLabel>Création de compte</ng-template>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nom d'utilisateur</mat-label>
          <input matInput formControlName="username" required />
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Mot de passe</mat-label>
          <input matInput formControlName="password" type="password" required />
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Confirmez le mot de passe</mat-label>
          <input matInput formControlName="confirmPassword" type="password" required />
        </mat-form-field>
  
        <div class="actions">
          <button mat-raised-button matStepperPrevious>Retour</button>
          <button mat-raised-button matStepperNext [disabled]="accountForm.invalid || !passwordsMatch()">Suivant</button>
        </div>
      </form>
    </mat-step>
  
    <!-- Étape 5 : Confirmation -->
    <mat-step>
      <ng-template matStepLabel>Confirmation</ng-template>
  
      <p>Merci, {{ personalInfoForm.get('userName')?.value }} !</p>
      <p>
        Vous avez réservé le service <strong>{{ serviceForm.get('serviceName')?.value }}</strong> pour le
        <strong>{{ serviceForm.get('reservationDate')?.value }}</strong>.
      </p>
      <p>Nous vous contacterons au <strong>{{ contactForm.get('phoneNumber')?.value }}</strong>.</p>
  
      <div class="actions">
        <button mat-raised-button matStepperPrevious>Retour</button>
        <button mat-raised-button color="primary" (click)="submitReservation()">Confirmer</button>
      </div>
    </mat-step>
  </mat-vertical-stepper>
  